## 第七章 CPU硬體模式
### 7.1 8086硬體模式
1. 將匯流排控制囉及與指令執行邏輯分成兩個獨立的單元 : 
* 匯流排介面單元(bus interface unit,BUI):
* 執行單元(execution unit,EU): 資料與未止戰存氣、算術與邏輯單元(ALU)、控制單元(CU)
> 當執行單元備妥執行一個新的指令時，他即由匯流陪介面單元中的指令柱列讀取一個指令OPCODE，使用一些與匯流排週期無關的時脈周期執行該指令。若指令柱列為空，則匯流排介面單元執行一個指令讀取(instruction fetch)匯流排週期，此時cpu則等待該指令opcode的讀取。若執行一個指令的過程中需要做記藝器或i/o裝置的存取時，執行單元即告知匯流排介面單元，然後由匯流排介面單元執行一個適當的匯流排週期，執行需要的動作。
> BIU除了執行單元要求的外部匯流排存取動作外，他的另一項重要任務是**隨時維持指令柱列於裝滿的狀態**。
> ![](https://i.imgur.com/gvPfjx3.png)
> 8086中指令柱列的主要功用在於消除指令的讀取時間，因而達到較好的操作性能。
2. 硬體介面
(1)系統支援接腳
* 電源
* 時脈輸入(CLK):提供CPU基本時序信號。duty cycle (1/3高，2/3低)
* RESET:高電位啟動並且需要延續四個週期以上
>狀態register清除為0，CS節區暫存器設定為OFFFFH。因此在重置後，CPU將由OFFFF0H(**IP+16CS**)的位址開始執行指令。
(2)記憶器介面:8086可以直接存取1M(2^20)位源祖德記憶器位址空間，每次最多可以存取兩個位元組，因此其位址匯流排為20位元(A0~A19)，而資料匯流排為16位元(D0~D15)。低序的16條位址匯流排與資料匯流排已多工方是輸出。
* 控制資料流動方向的控制信號:
> ~RD(低電位啟動):表示CPU欲自資料匯流排中讀取資料
> ~WR(低電位啟動):表示CPU正在寫入資料於資料匯流排
> IO/~M(Memory or Input/Output):指示CPU位址匯流排上的資料為記憶器位址或是I/O阜位址
> ALE(Address Latch Enable):由於8086使用多工方式將部分資料與位址信號線包裝於相同接腳上，因此要用一個控制信號告知外界電路這些街角目前是當作資料信號線或是位址信號線
> DT/~R(Data Transmit/Receive):data bus的動作方向，輸出資料(DT/~R=1)或接收資料(DT/~R=0)
> 8086將系統中的記憶器組織分成高低序兩個位元組的記憶器庫，而分別使用信號線~BHE與A0區分。
> ~BHE(Bus High Enable):低電位啟動，存取高序位元駔的資料匯流排
> ![](https://i.imgur.com/NrA7z7M.png)
